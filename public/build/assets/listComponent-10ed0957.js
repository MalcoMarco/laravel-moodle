import"./app-0d91dc04.js";import{d as Ee,m as pe,s as de,a as l,e as he,b as Ne,t as v,a9 as K,aa as Te,ab as be,ac as ke,ad as x,ae as D,af as se,ag as q,ah as Se,ai as we,aj as De,ak as Le,al as $e,am as Be,w as ve,an as A,ao as Ae,P as d,M as y,R as C,ap as ze,Q as V,aq as L,ar as Re,o as Y,as as H,F as re,at as Me,au as Ie,av as Fe,aw as je,ax as Ge,ay as qe,B as He,az as Ke,O as Ve,n as _e,V as X}from"./_plugin-vue2_normalizer-f70b0ffa.js";import{C as Ue,c as Ye,d as Xe,e as Je,f as Qe,a as We,b as Ze,B as et,V as tt,M as at}from"./table-45e0f0c7.js";import{T as st}from"./index-9f6650dc.js";var N;function ie(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);e&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,a)}return t}function ne(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ie(Object(t),!0).forEach(function(a){B(s,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(t,a))})}return s}function B(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}var z=Ee("value",{type:$e,defaultValue:null,validator:function(e){return!Be(e)&&v(e,0)<1?(ve('"v-model" value must be a number greater than "0"',A),!1):!0}}),rt=z.mixin,it=z.props,U=z.prop,nt=z.event,$=3,J=5,ot=function(e,t){return Ae(t,function(a,r){return{number:e+r,classes:null}})},oe=function(e){var t=v(e)||1;return t<1?J:t},le=function(e,t){var a=v(e)||1;return a>t?t:a<1?1:a},ue=function(e){if(e.keyCode===Qe)return K(e,{immediatePropagation:!0}),e.currentTarget.click(),!1},Pe=pe(de(ne(ne({},it),{},{align:l(d,"left"),ariaLabel:l(d,"Pagination"),disabled:l(y,!1),ellipsisClass:l(C),ellipsisText:l(d,"…"),firstClass:l(C),firstNumber:l(y,!1),firstText:l(d,"«"),hideEllipsis:l(y,!1),hideGotoEndButtons:l(y,!1),labelFirstPage:l(d,"Go to first page"),labelLastPage:l(d,"Go to last page"),labelNextPage:l(d,"Go to next page"),labelPage:l(ze,"Go to page"),labelPrevPage:l(d,"Go to previous page"),lastClass:l(C),lastNumber:l(y,!1),lastText:l(d,"»"),limit:l(V,J,function(s){return v(s,0)<1?(ve('Prop "limit" must be a number greater than "0"',A),!1):!0}),nextClass:l(C),nextText:l(d,"›"),pageClass:l(C),pills:l(y,!1),prevClass:l(C),prevText:l(d,"‹"),size:l(d)})),"pagination"),lt=he({mixins:[rt,Ne],props:Pe,data:function(){var e=v(this[U],0);return e=e>0?e:-1,{currentPage:e,localNumberOfPages:1,localLimit:J}},computed:{btnSize:function(){var e=this.size;return e?"pagination-".concat(e):""},alignment:function(){var e=this.align;return e==="center"?"justify-content-center":e==="end"||e==="right"?"justify-content-end":e==="fill"?"text-center":""},styleClass:function(){return this.pills?"b-pagination-pills":""},computedCurrentPage:function(){return le(this.currentPage,this.localNumberOfPages)},paginationParams:function(){var e=this.localLimit,t=this.localNumberOfPages,a=this.computedCurrentPage,r=this.hideEllipsis,n=this.firstNumber,f=this.lastNumber,i=!1,c=!1,o=e,u=1;t<=e?o=t:a<e-1&&e>$?((!r||f)&&(c=!0,o=e-(n?0:1)),o=L(o,e)):t-a+2<e&&e>$?((!r||n)&&(i=!0,o=e-(f?0:1)),u=t-o+1):(e>$&&(o=e-(r?0:2),i=!!(!r||n),c=!!(!r||f)),u=a-Re(o/2)),u<1?(u=1,i=!1):u>t-o&&(u=t-o+1,c=!1),i&&n&&u<4&&(o=o+2,u=1,i=!1);var b=u+o-1;return c&&f&&b>t-3&&(o=o+(b===t-2?2:3),c=!1),e<=$&&(n&&u===1?o=L(o+1,t,e+1):f&&t===u+o-1&&(u=Y(u-1,1),o=L(t-u+1,t,e+1))),o=L(o,t-u+1),{showFirstDots:i,showLastDots:c,numberOfLinks:o,startNumber:u}},pageList:function(){var e=this.paginationParams,t=e.numberOfLinks,a=e.startNumber,r=this.computedCurrentPage,n=ot(a,t);if(n.length>3){var f=r-a,i="bv-d-xs-down-none";if(f===0)for(var c=3;c<n.length;c++)n[c].classes=i;else if(f===n.length-1)for(var o=0;o<n.length-3;o++)n[o].classes=i;else{for(var u=0;u<f-1;u++)n[u].classes=i;for(var b=n.length-1;b>f+1;b--)n[b].classes=i}}return n}},watch:(N={},B(N,U,function(s,e){s!==e&&(this.currentPage=le(s,this.localNumberOfPages))}),B(N,"currentPage",function(e,t){e!==t&&this.$emit(nt,e>0?e:null)}),B(N,"limit",function(e,t){e!==t&&(this.localLimit=oe(e))}),N),created:function(){var e=this;this.localLimit=oe(this.limit),this.$nextTick(function(){e.currentPage=e.currentPage>e.localNumberOfPages?e.localNumberOfPages:e.currentPage})},methods:{handleKeyNav:function(e){var t=e.keyCode,a=e.shiftKey;this.isNav||(t===Ue||t===Ye?(K(e,{propagation:!1}),a?this.focusFirst():this.focusPrev()):(t===Xe||t===Je)&&(K(e,{propagation:!1}),a?this.focusLast():this.focusNext()))},getButtons:function(){return Te("button.page-link, a.page-link",this.$el).filter(function(e){return be(e)})},focusCurrent:function(){var e=this;this.$nextTick(function(){var t=e.getButtons().find(function(a){return v(ke(a,"aria-posinset"),0)===e.computedCurrentPage});x(t)||e.focusFirst()})},focusFirst:function(){var e=this;this.$nextTick(function(){var t=e.getButtons().find(function(a){return!D(a)});x(t)})},focusLast:function(){var e=this;this.$nextTick(function(){var t=e.getButtons().reverse().find(function(a){return!D(a)});x(t)})},focusPrev:function(){var e=this;this.$nextTick(function(){var t=e.getButtons(),a=t.indexOf(se());a>0&&!D(t[a-1])&&x(t[a-1])})},focusNext:function(){var e=this;this.$nextTick(function(){var t=e.getButtons(),a=t.indexOf(se());a<t.length-1&&!D(t[a+1])&&x(t[a+1])})}},render:function(e){var t=this,a=q(this),r=a.disabled,n=a.labelPage,f=a.ariaLabel,i=a.isNav,c=a.localNumberOfPages,o=a.computedCurrentPage,u=this.pageList.map(function(P){return P.number}),b=this.paginationParams,T=b.showFirstDots,R=b.showLastDots,_=this.align==="fill",m=[],Q=function(g){return g===o},M=this.currentPage<1,k=function(g,E,h,O,F,j,S){var p=r||Q(j)||M||g<1||g>c,w=g<1?1:g>c?c:g,ae={disabled:p,page:w,index:w-1},G=t.normalizeSlot(h,ae)||H(O)||e(),Ce=e(p?"span":i?re:"button",{staticClass:"page-link",class:{"flex-grow-1":!i&&!p&&_},props:p||!i?{}:t.linkProps(g),attrs:{role:i?null:"menuitem",type:i||p?null:"button",tabindex:p||i?null:"-1","aria-label":E,"aria-controls":q(t).ariaControls||null,"aria-disabled":p?"true":null},on:p?{}:{"!click":function(xe){t.onClick(xe,g)},keydown:ue}},[G]);return e("li",{key:S,staticClass:"page-item",class:[{disabled:p,"flex-fill":_,"d-flex":_&&!i&&!p},F],attrs:{role:i?null:"presentation","aria-hidden":p?"true":null}},[Ce])},W=function(g){return e("li",{staticClass:"page-item",class:["disabled","bv-d-xs-down-none",_?"flex-fill":"",t.ellipsisClass],attrs:{role:"separator"},key:"ellipsis-".concat(g?"last":"first")},[e("span",{staticClass:"page-link"},[t.normalizeSlot(Me)||H(t.ellipsisText)||e()])])},I=function(g,E){var h=g.number,O=Q(h)&&!M,F=r?null:O||M&&E===0?"0":"-1",j={role:i?null:"menuitemradio",type:i||r?null:"button","aria-disabled":r?"true":null,"aria-controls":q(t).ariaControls||null,"aria-label":Ie(n)?n(h):"".concat(Fe(n)?n():n," ").concat(h),"aria-checked":i?null:O?"true":"false","aria-current":i&&O?"page":null,"aria-posinset":i?null:h,"aria-setsize":i?null:c,tabindex:i?null:F},S=H(t.makePage(h)),p={page:h,index:h-1,content:S,active:O,disabled:r},w=e(r?"span":i?re:"button",{props:r||!i?{}:t.linkProps(h),staticClass:"page-link",class:{"flex-grow-1":!i&&!r&&_},attrs:j,on:r?{}:{"!click":function(G){t.onClick(G,h)},keydown:ue}},[t.normalizeSlot(je,p)||S]);return e("li",{staticClass:"page-item",class:[{disabled:r,active:O,"flex-fill":_,"d-flex":_&&!i&&!r},g.classes,t.pageClass],attrs:{role:i?null:"presentation"},key:"page-".concat(h)},[w])},Z=e();!this.firstNumber&&!this.hideGotoEndButtons&&(Z=k(1,this.labelFirstPage,Se,this.firstText,this.firstClass,1,"pagination-goto-first")),m.push(Z),m.push(k(o-1,this.labelPrevPage,we,this.prevText,this.prevClass,1,"pagination-goto-prev")),m.push(this.firstNumber&&u[0]!==1?I({number:1},0):e()),m.push(T?W(!1):e()),this.pageList.forEach(function(P,g){var E=T&&t.firstNumber&&u[0]!==1?1:0;m.push(I(P,g+E))}),m.push(R?W(!0):e()),m.push(this.lastNumber&&u[u.length-1]!==c?I({number:c},-1):e()),m.push(k(o+1,this.labelNextPage,De,this.nextText,this.nextClass,c,"pagination-goto-next"));var ee=e();!this.lastNumber&&!this.hideGotoEndButtons&&(ee=k(c,this.labelLastPage,Le,this.lastText,this.lastClass,c,"pagination-goto-last")),m.push(ee);var te=e("ul",{staticClass:"pagination",class:["b-pagination",this.btnSize,this.alignment,this.styleClass],attrs:{role:i?null:"menubar","aria-disabled":r?"true":"false","aria-label":i?null:f||null},on:i?{}:{keydown:this.handleKeyNav},ref:"ul"},m);return i?e("nav",{attrs:{"aria-disabled":r?"true":null,"aria-hidden":r?"true":"false","aria-label":i&&f||null}},[te]):te}});function ce(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);e&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,a)}return t}function fe(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ce(Object(t),!0).forEach(function(a){ut(s,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):ce(Object(t)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(t,a))})}return s}function ut(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}var Oe=20,ye=0,ge=function(e){return Y(v(e)||Oe,1)},me=function(e){return Y(v(e)||ye,0)},ct=pe(de(fe(fe({},Pe),{},{ariaControls:l(d),perPage:l(V,Oe),totalRows:l(V,ye)})),A),ft=he({name:A,mixins:[lt],props:ct,computed:{numberOfPages:function(){var e=Ge(me(this.totalRows)/ge(this.perPage));return e<1?1:e},pageSizeNumberOfPages:function(){return{perPage:ge(this.perPage),totalRows:me(this.totalRows),numberOfPages:this.numberOfPages}}},watch:{pageSizeNumberOfPages:function(e,t){qe(t)||(e.perPage!==t.perPage&&e.totalRows===t.totalRows?this.currentPage=1:e.numberOfPages!==t.numberOfPages&&this.currentPage>e.numberOfPages&&(this.currentPage=1)),this.localNumberOfPages=e.numberOfPages}},created:function(){var e=this;this.localNumberOfPages=this.numberOfPages;var t=v(this[U],0);t>0?this.currentPage=t:this.$nextTick(function(){e.currentPage=0})},methods:{onClick:function(e,t){var a=this;if(t!==this.currentPage){var r=e.target,n=new He(Ke,{cancelable:!0,vueTarget:this,target:r});this.$emit(n.type,n,t),!n.defaultPrevented&&(this.currentPage=t,this.$emit(Ve,this.currentPage),this.$nextTick(function(){be(r)&&a.$el.contains(r)?x(r):a.focusCurrent()}))}},makePage:function(e){return e},linkProps:function(){return{}}}});const gt=s=>{let e;return(...t)=>{clearTimeout(e),e=setTimeout(()=>{s(...t)},2500)}},mt={data(){return{pageSize:15,mostar:[15,25,50,100],query:""}},created(){this.realizarBusqueda=gt(()=>{this.$emit("changeQuery",this.query)})},watch:{pageSize(s){this.$emit("changePageSize",s)}}};var pt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex justify-content-center justify-content-md-between flex-wrap gap-4"},[t("div",{},[t("div",{staticClass:"d-flex gap-3"},[t("label",[e._v("Buscar:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"form-control form-control-sm",attrs:{type:"search",placeholder:"Buscar"},domProps:{value:e.query},on:{keyup:function(a){return e.realizarBusqueda()},input:function(a){a.target.composing||(e.query=a.target.value)}}})])]),t("div",{},[t("div",{staticClass:"d-flex gap-3"},[t("label",[e._v("mostrar")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.pageSize,expression:"pageSize"}],staticClass:"form-select form-select-sm",on:{change:function(a){var r=Array.prototype.filter.call(a.target.options,function(n){return n.selected}).map(function(n){var f="_value"in n?n._value:n.value;return f});e.pageSize=a.target.multiple?r:r[0]}}},e._l(e.mostar,function(a){return t("option",{key:"mostrar_"+a,domProps:{value:a}},[e._v(e._s(a))])}),0)])])])},dt=[],ht=_e(mt,pt,dt,!1,null,"3d51f343",null,null);const bt=ht.exports;const vt={props:["urlApiData","permissions","roles"],components:{BTable:We,BProgress:Ze,BPagination:ft,Tablefilter:bt,BModal:et},directives:{"b-modal":tt},data(){return{pagination:{data:[],per_page:15,current_page:1,from:1},perPage:15,q:"",sortBy:"",sortDesc:!0,fields:["#",{key:"curso_name",sortable:!0},{key:"escuela",sortable:!0},{key:"ciclo",sortable:!0},{key:"status",sortable:!0},{key:"updated_at",label:"Actualizado",sortable:!0,formatter:s=>this.formatTimetamp(s)},"Opciones"],isBusy:!1,canReviewSilabo:!1,modalVerSilabo:!1,silabo:{curso_name:"",escuela:"",ciclo:"",creditos:"",horas_teoricas:"",horas_practicas:"",pdf_url:""}}},created(){this.getData(1);let s=JSON.parse(this.roles),e=JSON.parse(this.permissions);(s.includes("siteadmin")||e.includes(" 	ru_gestion-silabus"))&&(this.canReviewSilabo=!0)},methods:{getData(s=1){let e={page:s,sortBy:this.sortBy,sortDesc:this.sortDesc,perPage:this.perPage,q:this.q};this.isBusy=!0,axios.get(this.urlApiData,{params:e}).then(t=>{this.pagination=t.data}).finally(()=>{this.isBusy=!1})},editItem(s){console.log(s)},verItem(s){console.log(s),this.silabo=s,this.modalVerSilabo=!0},deleteItem(s){this.$bvModal.msgBoxConfirm("Por favor, confirme que desea eliminar.",{title:"Confirmar",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Si, eliminar",cancelTitle:"No",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then(e=>{e&&axios.delete(`/silabus/${s}`).then(t=>{this.getData(),this.$bvToast.toast(t.data.message,{title:"Eliminado",variant:"success",solid:!0,autoHideDelay:5e3})}).catch(t=>{var r;let a=((r=t.response)==null?void 0:r.data.message)||"";this.$bvToast.toast(a,{title:"Ocurrio un Error",variant:"danger",solid:!0,autoHideDelay:5e3})})})},sortChanged(s){this.sortBy=s.sortBy,this.sortDesc=s.sortDesc,this.getData(1)},changePageSize(s){this.perPage=s,this.getData(1)},changeQuery(s){this.q=s,this.getData(1)},formatTimetamp(s){if(!s)return"";const e=new Date(s),t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),n=e.getHours(),f=e.getMinutes(),i=e.getSeconds(),c=m=>m<10?`0${m}`:m,o=c(a),u=c(r),b=c(n),T=c(f),R=c(i);return`${u}/${o}/${t} ${b}:${T}:${R}`}}};var _t=function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-100 mt-3"},[t("Tablefilter",{on:{changePageSize:e.changePageSize,changeQuery:e.changeQuery}}),t("b-table",{attrs:{responsive:"",striped:"",hover:"",items:e.pagination.data,fields:e.fields,"no-local-sorting":!0,busy:e.isBusy},on:{"sort-changed":e.sortChanged},scopedSlots:e._u([{key:"cell(#)",fn:function(a){return[e._v(" "+e._s(a.index+e.pagination.from)+" ")]}},{key:"cell(status)",fn:function(a){return[t("span",{staticClass:"badge",class:"badge-"+a.item.status_guard_name},[e._v(e._s(a.item.status))])]}},{key:"cell(Opciones)",fn:function(a){return[t("button",{staticClass:"btn btn-link btn-sm me-3",on:{click:function(r){return e.verItem(a.item)}}},[e._v(" Ver ")]),e.canReviewSilabo&&a.item.status_guard_name=="ER"?t("a",{staticClass:"btn btn-link btn-sm me-3",attrs:{href:"/silabus-review/"+a.item.id},on:{click:function(r){return e.editItem(a.item)}}},[e._v(" Revisión ")]):e._e(),a.item.status_guard_name=="OB"?t("a",{staticClass:"btn btn-warning btn-sm me-3 text-white",attrs:{href:"/silabus-observacion/"+a.item.id},on:{click:function(r){return e.editItem(a.item)}}},[e._v(" Observado ")]):e._e(),a.item.status_guard_name=="A"?t("a",{staticClass:"btn btn-success btn-sm me-3 text-white",attrs:{href:"/silabo-aprobado/"+a.item.id,target:"_blank"},on:{click:function(r){return e.editItem(a.item)}}},[e._v(" Aprobado ")]):e._e(),t("button",{staticClass:"btn btn-link btn-sm text-danger",on:{click:function(r){return e.deleteItem(a.item.id)}}},[e._v(" Eliminar ")])]}}])}),t("div",{staticClass:"d-flex justify-content-end"},[t("b-pagination",{attrs:{"total-rows":e.pagination.total,"per-page":e.pagination.per_page,"aria-controls":"my-table"},on:{change:e.getData},model:{value:e.pagination.current_page,callback:function(a){e.$set(e.pagination,"current_page",a)},expression:"pagination.current_page"}})],1),t("b-modal",{attrs:{id:"modal-xl",size:"xl",title:"Silabo: "+e.silabo.curso_name,"hide-footer":"",lazy:""},model:{value:e.modalVerSilabo,callback:function(a){e.modalVerSilabo=a},expression:"modalVerSilabo"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-4"},[t("div",{staticClass:"table"},[e.silabo.firstname||e.silabo.lastname?t("tr",[t("th",[e._v("Docente:")]),t("td",[e._v(e._s(e.silabo.lastname+" "+e.silabo.firstname))])]):e._e(),t("tr",[t("th",[e._v("Curso:")]),t("td",[e._v(e._s(e.silabo.curso_name))])]),t("tr",[t("th",[e._v("Escuela:")]),t("td",[e._v(e._s(e.silabo.escuela))])]),t("tr",[t("th",[e._v("Ciclo:")]),t("td",[e._v(e._s(e.silabo.ciclo))])]),t("tr",[t("th",[e._v("Creditos:")]),t("td",[e._v(e._s(e.silabo.creditos))])]),t("tr",[t("th",[e._v("Horas teóricas:")]),t("td",[e._v(e._s(e.silabo.horas_teoricas))])]),t("tr",[t("th",[e._v("Horas practicas:")]),t("td",[e._v(e._s(e.silabo.horas_practicas))])])])]),t("div",{staticClass:"col-lg-8"},[t("div",{staticClass:"ratio ratio-4x3"},[t("iframe",{staticClass:"w-100 h-100",attrs:{src:e.silabo.pdf_url,frameborder:"0"}})])])])])],1)},Pt=[],Ot=_e(vt,_t,Pt,!1,null,"5f176f32",null,null);const yt=Ot.exports;X.use(at);X.use(st);new X({el:"#list-component",components:{listComponent:yt}});
